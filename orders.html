<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Orders | WASE</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="assets/style.css">
<script src="assets/app.js"></script>
</head>
<body>

<header>My Orders</header>

<div id="orders" class="grid"></div>

<script>
const user = getUser();
if(!user){
  alert("Please login first");
  location.href="login.html";
}

fetch(API + "?action=orders&phone=" + encodeURIComponent(user.phone))
  .then(r=>r.json())
  .then(list=>{
    if(!list.length){
      orders.innerHTML = "<p>No orders found</p>";
      return;
    }

    orders.innerHTML = list.map(o=>`
      <div class="card">
        <h3>${o[0]}</h3>
        <p>${o[6]}</p>
        <strong>â‚¹${o[7]}</strong><br>
        <small>Status: ${o[8]}</small>
      </div>
    `).join("");
  });
</script>

</body>
</html>
